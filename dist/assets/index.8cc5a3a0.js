import{c as V,a as wt,b as St,p as It,d as Pt,e as _t,s as Ft,f as Ot,F as Dt,R as Tt,P as Mt,g as Lt,h as Wt,i as Ut,j as Je,u as C,k as e,l as b,m as Gt,n as Et,r as v,o as r,D as ue,q as E,t as re,v as ke,L as pe,w as K,x as Ae,y as q,z as R,B as k,T as U,I as L,A as $t,M as At,C as B,E as ae,G as Rt,H as g,J as Kt,K as ve,N as Ye,O as Ce,Q as p,S as xe,U as qt,V as Bt,W as m,X as w,Y as Ht,Z as Nt,_ as Xe,$ as X,a0 as Z,a1 as me,a2 as we,a3 as Ue,a4 as et,a5 as ge,a6 as jt,a7 as fe,a8 as se,a9 as tt,aa as nt,ab as zt,ac as Vt,ad as Qt,ae as Ge,af as rt,ag as at,ah as Zt,ai as Jt,aj as M,ak as Yt,al as Xt,am as Re,an as Ke,ao as en,ap as tn,aq as nn,ar as rn,as as z,at as an,au as sn,av as ln,aw as on,ax as J,ay as cn,az as st,aA as dn,aB as un,aC as hn,aD as pn,aE as mn,aF as j,aG as F,aH as qe,aI as gn,aJ as fn,aK as xn,aL as Se,aM as Be,aN as He,aO as Ie,aP as yn,aQ as bn,aR as ee,aS as te,aT as kn,aU as vn,aV as Cn,aW as wn,aX as Sn,aY as In,aZ as Pn,a_ as _n,a$ as Fn,b0 as On,b1 as Dn,b2 as Tn,b3 as Mn}from"./vendor.0ba05514.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&d(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerpolicy&&(c.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?c.credentials="include":a.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function d(a){if(a.ep)return;a.ep=!0;const c=s(a);fetch(a.href,c)}})();const Ln={reload:!1,selectedModel:null,selectedWorkers:[],genForm:{prompt:"",params:{sampler_name:"k_euler",toggles:[1,4],cfg_scale:7,seed:"",height:512,width:512,seed_variation:1,post_processing:[],karras:!0,tiling:!1,hires_fix:!1,clip_skip:1,steps:20,n:1},nsfw:!0,trusted_workers:!1,censor_nsfw:!1,workers:[],models:[],r2:!0,shared:!0}},Pe=V({name:"comparatorPanel",initialState:Ln,reducers:{setSelectedModel:(n,t)=>{n.selectedModel=t.payload},setSelectedWorkers:(n,t)=>{n.selectedWorkers=t.payload},setGenForm:(n,t)=>{n.genForm=structuredClone(t.payload)},setReload:(n,t)=>{n.reload=t.payload}}}),{setSelectedModel:Ne,setSelectedWorkers:oe,setGenForm:lt,setReload:it}=Pe.actions,Wn={sidebarOpen:!1},_e=V({name:"localState",initialState:Wn,reducers:{setSidebarOpen:(n,t)=>{n.sidebarOpen=t.payload}}}),{setSidebarOpen:ot}=_e.actions,Fe={apikey:"",selectedTab:"1",genFavorites:[],imageGens:[]},le=V({name:"persist",initialState:Fe,reducers:{setKey:(n,t)=>{n.apikey=t.payload},setSelectedTab:(n,t)=>{n.selectedTab=t.payload},resetImageGens:n=>{n.imageGens=[]},addImageGen:(n,t)=>{n.imageGens.find(d=>d.id===t.payload.id)||n.imageGens.push(t.payload)},updateImageGen:(n,t)=>{const s=n.imageGens.findIndex(d=>d.id===t.payload.id);s!=null&&(n.imageGens[s]=t.payload)},addGenFavorite:(n,t)=>{n.genFavorites.push(t.payload)},updateGenFavorite:(n,t)=>{n.genFavorites[t.payload.idx]={name:n.genFavorites[t.payload.idx].name,form:t.payload.form}},deleteGenFavorite:(n,t)=>{n.genFavorites.splice(t.payload)},resetExceptApiKey:n=>(n={...Fe,apikey:n.apikey},n)}}),{setKey:Un,setSelectedTab:Gn,resetImageGens:je,addImageGen:En,updateImageGen:he,addGenFavorite:$n,resetExceptApiKey:jr,updateGenFavorite:An,deleteGenFavorite:Rn}=le.actions,Kn={showPassword:!1},Oe=V({name:"settingsPanel",initialState:Kn,reducers:{setShowPassword:(n,t)=>{n.showPassword=t.payload}}}),{setShowPassword:De}=Oe.actions,qn={},Te=V({name:"userPanel",initialState:qn,reducers:{setUser:(n,t)=>{n.selectedUser=t.payload}}}),{setUser:ze}=Te.actions,Bn={prompt:""},Me=V({name:"utilityPanel",initialState:Bn,reducers:{setPrompt:(n,t)=>{n.prompt=t.payload}}}),{setPrompt:Hn}=Me.actions,Nn={sortKey:"name",order:"asc"},Le=V({name:"workerPanel",initialState:Nn,reducers:{setWorkerFilter:(n,t)=>{n.workerFilter=t.payload},setSortKey:(n,t)=>{n.sortKey=t.payload},setOrder:(n,t)=>{n.order=t.payload}}}),{setWorkerFilter:jn,setSortKey:zn,setOrder:Vn}=Le.actions,Qn=wt((n,t)=>n,(n,t)=>Object.assign({},Fe,n),{whitelist:[le.name]}),Zn={key:"root",storage:Ot,whitelist:[le.name],transforms:[Qn]},Jn=St({[le.name]:le.reducer,[_e.name]:_e.reducer,[Oe.name]:Oe.reducer,[Te.name]:Te.reducer,[Me.name]:Me.reducer,[Le.name]:Le.reducer,[Pe.name]:Pe.reducer}),Yn=It(Zn,Jn),ye=Pt({reducer:Yn,middleware:n=>n({serializableCheck:{ignoredActions:[Dt,Tt,Mt,Lt,Wt,Ut]}}),devTools:!1}),Xn=_t(ye);Ft(ye.dispatch);const P=Je.create({baseURL:"https://stablehorde.net/api/v2/"});P.interceptors.request.use(function(n){const t=ye.getState().persist.apikey;return n.headers!=null&&t!=null&&(n.headers.apikey=t),n},function(n){return Promise.reject(n)});const er=Je.create({baseURL:"/horde-control-tower/"}),tr=n=>P.get("find_user",{headers:{apikey:n}}).then(t=>t.data),ct=()=>P.get("status/modes").then(n=>n.data),dt=()=>P.get("status/performance").then(n=>n.data),ut=()=>er.get("users.json").then(n=>n.data),Ee=n=>P.get(`users/${n}`).then(t=>t.data),$e=()=>P.get("workers").then(n=>n.data),nr=n=>P.get(`workers/${n}`).then(t=>t.data),ht=()=>P.get("status/models").then(n=>n.data),pt=(n,t)=>P.put(`users/${n}`,t).then(s=>s.data),rr=(n,t)=>P.put(`workers/${n}`,t).then(s=>s.data),ar=n=>P.post("filters",n).then(t=>t.data),sr=n=>P.post("generate/async",n).then(t=>t.data),lr=n=>P.get(`generate/check/${n}`).then(t=>t.data),ir=n=>P.get(`generate/status/${n}`).then(t=>t.data),or=n=>P.delete(`generate/status/${n}`).then(t=>t.data),W={all:["users"],lists:()=>[...W.all,"list"],list:n=>[...W.lists(),{filters:n}],details:()=>[...W.all,"detail"],detail:n=>[...W.details(),n]},$={all:["workers"],lists:()=>[...$.all,"list"],list:n=>[...$.lists(),{filters:n}],details:()=>[...$.all,"detail"],detail:n=>[...$.details(),n]},cr=()=>(C(W.all,ut,{staleTime:1e3*30,refetchInterval:1e3*30}),C(["performance"],dt,{staleTime:1e3*30,refetchInterval:1e3*30}),C(["mode"],ct,{staleTime:1e3*30,refetchInterval:1e3*30}),C(["models"],ht,{staleTime:1e3*30,refetchInterval:1e3*30}),e(b,{})),T=()=>Et(),x=Gt,dr=()=>{const n=T(),t=x(I=>I.comparatorPanel.genForm),s=x(I=>I.persist.genFavorites),[d,a]=v.exports.useState(!1),[c,o]=v.exports.useState(-1),[u,l]=v.exports.useState(!1),[h,f]=v.exports.useState(-1),[O,_]=v.exports.useState(!1),[G,H]=v.exports.useState(""),[S,i]=v.exports.useState(null),y=Boolean(S),N=I=>{i(I.currentTarget)},be=()=>{i(null)},ie=()=>{_(!1)},Q=()=>{n($n({name:G,form:t})),H(""),_(!1)},Y=()=>{o(-1),a(!1)},ft=()=>{n(An({idx:c,form:t})),o(-1),a(!1)},xt=()=>{f(-1),l(!1)},yt=()=>{n(Rn(h)),f(-1),l(!1)},bt=I=>{n(lt(I)),n(it(!0)),i(null)},kt=()=>{_(!0),i(null)},vt=()=>{a(!0),i(null)},Ct=()=>{l(!0),i(null)};return r(b,{children:[r(ue,{open:u,onClose:Y,children:[e(E,{children:"Delete Preset"}),r(re,{children:[e(ke,{children:"Select a preset to delete."}),e(pe,{children:s.map((I,A)=>e(K,{disablePadding:!0,sx:{backgroundColor:h===A?"error.dark":""},onClick:()=>{f(A)},children:e(Ae,{children:e(q,{primary:I.name})})},A))})]}),r(R,{children:[e(k,{onClick:xt,children:"Cancel"}),e(k,{disabled:h===-1,onClick:yt,children:"Select"})]})]}),r(ue,{open:d,onClose:Y,children:[e(E,{children:"Overwrite Preset"}),r(re,{children:[e(ke,{children:"Select a preset to overwrite."}),e(pe,{children:s.map((I,A)=>e(K,{disablePadding:!0,sx:{backgroundColor:c===A?"success.dark":""},onClick:()=>{o(A)},children:e(Ae,{children:e(q,{primary:I.name})})},A))})]}),r(R,{children:[e(k,{onClick:Y,children:"Cancel"}),e(k,{disabled:c===-1,onClick:ft,children:"Select"})]})]}),r(ue,{open:O,onClose:ie,children:[e(E,{children:"Add New Preset"}),r(re,{children:[e(ke,{children:"Enter a friendly name for this new preset."}),e(U,{autoFocus:!0,margin:"dense",label:"Name",fullWidth:!0,variant:"standard",value:G,onChange:I=>{H(I.target.value)}})]}),r(R,{children:[e(k,{onClick:ie,children:"Cancel"}),e(k,{onClick:Q,children:"Create"})]})]}),e(L,{onClick:N,children:e($t,{})}),r(At,{anchorEl:S,open:y,onClose:be,children:[s.map((I,A)=>e(B,{onClick:()=>{bt(I.form)},children:I.name},A)),s.length>0?e(ae,{}):null,s.length>0?e(B,{onClick:Ct,children:"Delete Preset"}):null,s.length>0?e(ae,{}):null,s.length>0?e(B,{onClick:vt,children:"Overwrite Preset"}):null,s.length>0?e(ae,{}):null,e(B,{onClick:kt,children:"Add New Preset"})]})]})},ur=()=>{const n=x(a=>a.persist.imageGens),{data:t}=C($.all,()=>$e(),{refetchInterval:1e3*30,select:a=>Rt(a.map(c=>[c.id,c.name]))}),s=a=>{var o,u,l;const c=a.status!=null?a.status:a.check;return a.state!=="complete"&&c!=null?r(ve,{sx:{paddingTop:"100%",border:"1px solid black"},children:[e(Ye,{sx:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}),e(Ce,{title:t==null?"":t[(o=a.payload.workers[0])!=null?o:""],subtitle:`Position: ${c.queue_position}, wait time: ${c.wait_time}`})]},a.id):a.state==="complete"?d(a).length===0?r(ve,{sx:{paddingTop:"100%",border:"1px solid black"},children:[e(p,{variant:"h3",sx:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:"Canceled"}),e(Ce,{title:t==null?"":t[(u=a.payload.workers[0])!=null?u:""]})]},a.id):r(ve,{sx:{paddingTop:d(a).length>0?"0%":"100%",border:"1px solid black"},children:[e("img",{src:d(a)}),e(Ce,{title:t==null?"":t[(l=a.payload.workers[0])!=null?l:""]})]},a.id):e(b,{})},d=a=>a.status!=null&&a.status.generations.length>0?a.status.generations[0].img:"";return e(g,{children:e(Kt,{sx:{width:"100%",height:"100%"},cols:4,children:n.map(a=>s(a))})})},hr=["GFPGAN","RealESRGAN_x4plus","CodeFormers"],pr=["k_lms","k_heun","k_euler","k_euler_a","k_dpm_2","k_dpm_2_a","k_dpm_fast","k_dpm_adaptive","k_dpmpp_2m","k_dpmpp_2s_a","k_dpmpp_sde"],D="175px",mr=()=>{const n=T(),t=x(i=>i.comparatorPanel.selectedWorkers),s=x(i=>i.comparatorPanel.selectedModel),d=x(i=>i.comparatorPanel.genForm),a=x(i=>i.persist.imageGens),c=x(i=>i.persist.imageGens.length>0),o=x(i=>i.comparatorPanel.reload),u=x(i=>i.persist.imageGens.some(y=>["pending","check"].includes(y.state))),{mutate:l}=xe({mutationFn:sr,onSuccess:(i,y,N)=>{n(En({id:i.id,payload:y,state:"check",check:null,status:null}))}}),{handleSubmit:h,control:f,formState:{errors:O},watch:_,setValue:G,reset:H}=qt({defaultValues:d}),S=i=>{s!=null&&t.length>0&&(n(je()),t.forEach(y=>{const N={...i,workers:[y.id],models:[s.name]};l(N)}))};return v.exports.useEffect(()=>{const i=_(Bt((y,{name:N,type:be})=>{n(lt(y))},300));return()=>i.unsubscribe()},[_]),v.exports.useEffect(()=>{o&&(n(it(!1)),H(d))},[o]),e(g,{children:r("form",{onSubmit:h(S),children:[r(g,{sx:{display:"flex",alignItems:"center",py:1},children:[e(p,{variant:"body1",sx:{width:D},children:"Prompt"}),e(m,{container:!0,spacing:2,alignItems:"center",children:e(w,{name:"prompt",control:f,render:({field:i})=>e(m,{item:!0,xs:!0,children:e(U,{fullWidth:!0,required:!0,multiline:!0,placeholder:"Enter prompt here",...i})})})})]}),r(g,{sx:{display:"flex",alignItems:"center",py:1},children:[e(p,{variant:"body1",sx:{width:D},children:"Seed"}),r(m,{container:!0,spacing:2,alignItems:"center",children:[e(w,{name:"params.seed",control:f,render:({field:i})=>e(m,{item:!0,xs:!0,children:e(U,{fullWidth:!0,placeholder:"Seed",...i})})}),e(m,{item:!0,children:e(L,{"aria-label":"randomize seed",onClick:()=>{G("params.seed",Ht(1e8,999999999).toString())},children:e(Nt,{})})})]})]}),r(g,{sx:{display:"flex",alignItems:"center",py:1},children:[e(p,{variant:"body1",sx:{width:D},children:"Sampler"}),e(m,{container:!0,spacing:2,alignItems:"center",children:e(w,{name:"params.sampler_name",control:f,render:({field:i})=>e(m,{item:!0,xs:!0,children:e(Xe,{...i,fullWidth:!0,children:pr.map(y=>e(B,{value:y,children:y},y))})})})})]}),r(g,{sx:{display:"flex",alignItems:"center",py:1},children:[e(p,{variant:"body1",sx:{width:D},children:"Steps"}),r(m,{container:!0,spacing:2,alignItems:"center",children:[e(w,{name:"params.steps",control:f,render:({field:i})=>e(m,{item:!0,xs:!0,children:e(X,{valueLabelDisplay:"auto",marks:!0,step:1,min:1,max:100,...i})})}),e(w,{name:"params.steps",control:f,render:({field:i})=>e(m,{item:!0,children:e(Z,{type:"number",sx:{width:"60px",ml:1},inputProps:{step:1,min:1,max:100,type:"number"},...i,onChange:y=>{i.onChange(parseInt(y.target.value))}})})})]})]}),r(g,{sx:{display:"flex",alignItems:"center",py:1},children:[e(p,{variant:"body1",sx:{width:D},children:"Width"}),r(m,{container:!0,spacing:2,alignItems:"center",children:[e(w,{name:"params.width",control:f,render:({field:i})=>e(m,{item:!0,xs:!0,children:e(X,{valueLabelDisplay:"auto",marks:!0,step:64,min:64,max:1024,...i})})}),e(w,{name:"params.width",control:f,render:({field:i})=>e(m,{item:!0,children:e(Z,{type:"number",sx:{width:"60px",ml:1},inputProps:{step:64,min:64,max:1024,type:"number"},...i,onChange:y=>{i.onChange(parseInt(y.target.value))}})})})]})]}),r(g,{sx:{display:"flex",alignItems:"center",py:1},children:[e(p,{variant:"body1",sx:{width:D},children:"Height"}),r(m,{container:!0,spacing:2,alignItems:"center",children:[e(w,{name:"params.height",control:f,render:({field:i})=>e(m,{item:!0,xs:!0,children:e(X,{valueLabelDisplay:"auto",marks:!0,step:64,min:64,max:1024,...i})})}),e(w,{name:"params.height",control:f,render:({field:i})=>e(m,{item:!0,children:e(Z,{type:"number",sx:{width:"60px",ml:1},inputProps:{step:64,min:64,max:1024,type:"number"},...i,onChange:y=>{i.onChange(parseInt(y.target.value))}})})})]})]}),r(g,{sx:{display:"flex",alignItems:"center",py:1},children:[e(p,{variant:"body1",sx:{width:D},children:"CFG"}),r(m,{container:!0,spacing:2,alignItems:"center",children:[e(w,{name:"params.cfg_scale",control:f,render:({field:i})=>e(m,{item:!0,xs:!0,children:e(X,{valueLabelDisplay:"auto",marks:!0,step:1,min:1,max:24,...i})})}),e(w,{name:"params.cfg_scale",control:f,render:({field:i})=>e(m,{item:!0,children:e(Z,{type:"number",sx:{width:"60px",ml:1},inputProps:{step:1,min:1,max:24,type:"number"},...i,onChange:y=>{i.onChange(parseInt(y.target.value))}})})})]})]}),r(g,{sx:{display:"flex",alignItems:"center",py:1},children:[e(p,{variant:"body1",sx:{width:D},children:"Clip Skip"}),r(m,{container:!0,spacing:2,alignItems:"center",children:[e(w,{name:"params.clip_skip",control:f,render:({field:i})=>e(m,{item:!0,xs:!0,children:e(X,{valueLabelDisplay:"auto",marks:!0,step:1,min:1,max:12,...i})})}),e(w,{name:"params.clip_skip",control:f,render:({field:i})=>e(m,{item:!0,children:e(Z,{type:"number",sx:{width:"60px",ml:1},inputProps:{step:1,min:1,max:12,type:"number"},...i,onChange:y=>{i.onChange(parseInt(y.target.value))}})})})]})]}),r(g,{sx:{display:"flex",alignItems:"center",py:1},children:[e(p,{variant:"body1",sx:{width:D},children:"Post-Processors"}),e(m,{container:!0,spacing:2,alignItems:"center",children:e(w,{name:"params.post_processing",control:f,render:({field:{onChange:i,onBlur:y,value:N,name:be,ref:ie}})=>e(m,{item:!0,xs:!0,children:e(me,{fullWidth:!0,multiple:!0,onBlur:y,ref:ie,value:N,onChange:(Q,Y)=>{i(Y)},options:hr,getOptionLabel:Q=>Q,renderInput:Q=>e(U,{...Q})})})})})]}),r(g,{sx:{display:"flex",alignItems:"center",py:1},children:[e(p,{variant:"body1",sx:{width:D},children:"High Res Fix"}),e(m,{container:!0,spacing:2,alignItems:"center",children:e(w,{name:"params.hires_fix",control:f,render:({field:i})=>e(m,{item:!0,xs:!0,children:e(we,{...i,checked:i.value})})})})]}),r(g,{sx:{display:"flex",alignItems:"center",py:1},children:[e(p,{variant:"body1",sx:{width:D},children:"Karras"}),e(m,{container:!0,spacing:2,alignItems:"center",children:e(w,{name:"params.karras",control:f,render:({field:i})=>e(m,{item:!0,xs:!0,children:e(we,{...i,checked:i.value})})})})]}),r(g,{sx:{display:"flex",alignItems:"center",py:1},children:[e(p,{variant:"body1",sx:{width:D},children:"Tiling"}),e(m,{container:!0,spacing:2,alignItems:"center",children:e(w,{name:"params.tiling",control:f,render:({field:i})=>e(m,{item:!0,xs:!0,children:e(we,{...i,checked:i.value})})})})]}),e(Ue,{type:"submit",loading:u,variant:"contained",children:"Submit"}),u?e(k,{sx:{ml:2},color:"error",variant:"contained",onClick:()=>{a.filter(i=>["pending","check"].includes(i.state)).forEach(i=>{n(he({...i,state:"delete"}))})},children:"Cancel"}):null,c?e(k,{sx:{ml:2},variant:"contained",onClick:()=>{n(je())},children:"Clear Output"}):null]})})},gr=n=>n!=null&&"name"in n,fr=n=>n!=null&&et(n)&&"name"in n[0]&&"id"in n[0],Ve="175px",xr=()=>{const n=T(),t=x(l=>l.comparatorPanel.selectedWorkers),s=x(l=>l.comparatorPanel.selectedModel),d=(l,h)=>{et(h)&&h.length===0?n(oe([])):fr(h)&&n(oe(h))},a=(l,h)=>{h==null?n(Ne(null)):gr(h)&&n(Ne(h))},{data:c}=C($.all,()=>$e(),{refetchInterval:1e3*30,select:l=>ge(l,[h=>h.name.toLowerCase()],["asc"])}),{data:o}=C(["models"],ht,{staleTime:1e3*30,refetchInterval:1e3*30,select:l=>ge(l,[h=>h.name.toLowerCase()],["asc"])});if(v.exports.useEffect(()=>{if(s!=null&&t.length>0){const l=t.map(O=>O.id),h=t.filter(O=>O.models.includes(s.name)),f=h.map(O=>O.id);jt(l,f)||n(oe(h))}else s==null&&t.length>0&&n(oe([]))},[c,o,t,s]),c==null||o==null)return e(b,{});const u=c.filter(l=>s==null?!0:l.models.includes(s.name));return r(g,{children:[r(g,{sx:{display:"flex",alignItems:"center",py:1},children:[e(p,{variant:"body1",sx:{width:Ve},children:"Model"}),e(me,{fullWidth:!0,disablePortal:!0,options:o,blurOnSelect:!0,value:s,autoHighlight:!0,getOptionLabel:l=>fe(l)?l:l.name,isOptionEqualToValue:(l,h)=>l.name===h.name,filterSelectedOptions:!0,renderInput:l=>e(U,{...l,label:"Selected Model"}),onChange:a})]}),r(g,{sx:{display:"flex",alignItems:"center",py:1},children:[e(p,{variant:"body1",sx:{width:Ve},children:"Workers"}),e(me,{fullWidth:!0,multiple:!0,disablePortal:!0,options:u,value:t,getOptionLabel:l=>l.name,isOptionEqualToValue:(l,h)=>l.id===h.id,filterSelectedOptions:!0,renderInput:l=>e(U,{...l,label:"Selected Workers"}),onChange:d})]})]})},yr=()=>r(m,{container:!0,spacing:2,children:[e(m,{item:!0,xs:12,xl:4,children:r(se,{sx:{p:2},children:[r(g,{sx:{position:"relative"},children:[e(p,{align:"center",variant:"h4",sx:{pb:1},children:"Generation Settings"}),e(g,{sx:{position:"absolute",top:0,right:0},children:e(dr,{})})]}),e(xr,{}),e(mr,{})]})}),e(m,{item:!0,xs:12,xl:8,children:r(se,{sx:{p:2,height:"100%"},children:[e(p,{align:"center",variant:"h4",sx:{pb:1},children:"Output"}),e(ur,{})]})})]}),mt=()=>{const n=T(),t=x(a=>a.persist.apikey),s=x(a=>a.settingsPanel.showPassword);return r(tt,{sx:{m:1,width:"35ch"},variant:"standard",children:[e(nt,{children:"API Key"}),e(Z,{defaultValue:t,onBlur:a=>{n(Un(a.target.value)),n(De(!1))},type:s?"text":"password",endAdornment:e(zt,{position:"end",children:e(L,{onClick:()=>n(De(!s)),children:s?e(Vt,{}):e(Qt,{})})})})]})},br=()=>e(m,{container:!0,spacing:2,children:e(m,{item:!0,md:12,lg:6,xl:4,children:e(se,{children:e(mt,{})})})}),We="#0583B0",ne="#FF6962",kr="#7c0500",vr="#ef9b0f",gt=n=>{const{worker:t}=n,s=Ge(),[d,a]=v.exports.useState(!1),[c,o]=v.exports.useState(!1),[u,l]=v.exports.useState("setFlagged"),[h,f]=v.exports.useState(""),O=S=>parseFloat(S.performance)>3?vr:S.maintenance_mode||S.paused||S.flagged?kr:"background.paper",_=xe(S=>rr(S.id,S.data),{onSuccess:(S,i)=>{a(!0),s.invalidateQueries({queryKey:$.detail(i.id)}),s.invalidateQueries({queryKey:$.all})}}),G=(S,i)=>{i!=="clickaway"&&a(!1)};return r(b,{children:[e(ue,{open:c,onClose:()=>o(!1),children:(S=>{switch(S){case"setFlagged":return r(b,{children:[r(E,{children:['Set "',t.name,'" as Flagged']}),r(R,{children:[e(k,{onClick:()=>{o(!1)},children:"Cancel"}),e(k,{onClick:()=>{o(!1)},children:"Confirm"})]})]});case"unsetFlagged":return r(b,{children:[r(E,{children:['Unset "',t.name,'" as Flagged']}),r(R,{children:[e(k,{onClick:()=>o(!1),children:"Cancel"}),e(k,{onClick:()=>{o(!1)},children:"Confirm"})]})]});case"setMaintenance":return r(b,{children:[r(E,{children:['Set "',t.name,'" Maintenance Mode']}),e(re,{children:e(U,{value:h,onChange:i=>{f(i.target.value)},multiline:!0,autoFocus:!0,margin:"dense",id:"name",label:"Maintenance Reason (optional)",fullWidth:!0,variant:"standard"})}),r(R,{children:[e(k,{onClick:()=>o(!1),children:"Cancel"}),e(k,{onClick:()=>{const i={maintenance:!0};J(h)||(i.maintenance_msg=h),_.mutate({id:t.id,data:i}),o(!1)},children:"Confirm"})]})]});case"unsetMaintenance":return r(b,{children:[r(E,{children:['Unset "',t.name,'" Maintenance Mode']}),r(R,{children:[e(k,{onClick:()=>o(!1),children:"Cancel"}),e(k,{onClick:()=>{_.mutate({id:t.id,data:{maintenance:!1,maintenance_msg:""}}),o(!1)},children:"Confirm"})]})]});case"setPaused":return r(b,{children:[r(E,{children:['Set "',t.name,'" Paused Mode']}),r(R,{children:[e(k,{onClick:()=>o(!1),children:"Cancel"}),e(k,{onClick:()=>{_.mutate({id:t.id,data:{paused:!0}}),o(!1)},children:"Confirm"})]})]});case"unsetPaused":return r(b,{children:[r(E,{children:['Unset "',t.name,'" Paused Mode']}),r(R,{children:[e(k,{onClick:()=>o(!1),children:"Cancel"}),e(k,{onClick:()=>{_.mutate({id:t.id,data:{paused:!1}}),o(!1)},children:"Confirm"})]})]});case"listModels":return r(b,{children:[r(E,{children:['"',t.name,'" Models']}),e(re,{children:e(p,{variant:"body1",children:ge(t.models,[i=>i.toLowerCase()]).join(", ")})})]})}})(u)}),e(rt,{open:d,autoHideDuration:6e3,onClose:G,anchorOrigin:{vertical:"top",horizontal:"right"},children:e(at,{onClose:G,severity:"success",sx:{width:"100%",border:"2px solid #a3a3a3"},children:"Changes successfully saved!"})}),e(m,{item:!0,xs:12,lg:6,xl:3,children:r(Zt,{sx:{backgroundColor:O(t)},children:[e(Jt,{avatar:t.online&&!t.paused&&!t.maintenance_mode&&!t.flagged?e(M,{title:"Worker Online",children:e(Yt,{sx:{color:We}})}):e(M,{title:"Worker Issue",children:e(Xt,{sx:{color:ne}})}),action:r(g,{children:[t.paused?e(M,{title:"Worker Paused",children:e(Re,{sx:{color:ne,mt:.5,mr:1}})}):null,t.maintenance_mode?e(M,{title:"Worker Maintenance",children:e(Ke,{sx:{color:ne,mt:.5,mr:1}})}):null,t.flagged?e(M,{title:"User Flagged",children:e(en,{sx:{color:ne,mt:.5,mr:1}})}):null,t.trusted?e(M,{title:"Trusted Worker",children:e(tn,{sx:{color:We,mt:.5,mr:1}})}):null]}),title:e(p,{variant:"h5",children:nn(t.name,{length:30})}),subheader:t.id}),r(rn,{children:[r(p,{variant:"body2",children:["Full Name: ",t.name]}),r(p,{variant:"body2",children:["Owner: ",t.owner]}),r(p,{variant:"body2",children:["Uptime: ",z.fromObject({seconds:t.uptime}).toHuman()]}),r(p,{variant:"body2",children:["Models Loaded: ",t.models.length]}),r(p,{variant:"body2",children:["MPS Generated: ",t.megapixelsteps_generated]}),r(p,{variant:"body2",children:["Speed: ",t.performance," MPS"]}),r(p,{variant:"body2",children:["Threads: ",t.threads]}),r(p,{variant:"body2",children:["Requests Fulfilled: ",t.requests_fulfilled]}),r(p,{variant:"body2",children:["NSFW: ",t.nsfw?"true":"false"]})]}),r(an,{disableSpacing:!0,children:[e(M,{title:"Show Worker Models",children:e(L,{onClick:()=>{l("listModels"),o(!0)},children:e(sn,{})})}),t.maintenance_mode?e(M,{title:"Unset Worker Maintenance",children:e(L,{onClick:()=>{l("unsetMaintenance"),o(!0)},children:e(ln,{})})}):e(M,{title:"Set Worker Maintenance",children:e(L,{onClick:()=>{l("setMaintenance"),o(!0)},children:e(Ke,{})})}),t.paused?e(M,{title:"Unset Worker Pause",children:e(L,{onClick:()=>{l("unsetPaused"),o(!0)},children:e(on,{})})}):e(M,{title:"Set Worker Pause",children:e(L,{onClick:()=>{l("setPaused"),o(!0)},children:e(Re,{})})})]})]})},t.id)]})},Cr=n=>{const{workerId:t}=n,{data:s}=C($.detail(t),()=>nr(t),{staleTime:1e3*61,select:d=>({...d,performance:d.performance.replace(" megapixelsteps per second","")})});return s==null?e(b,{}):e(gt,{worker:s})},wr=n=>{const{userId:t}=n,{data:s}=C(W.detail(t),()=>Ee(t));return s==null?e(b,{}):s.worker_ids.length===0?e(m,{item:!0,md:12,lg:6,xl:4,children:e(p,{variant:"body1",children:"This user has no workers."})}):e(b,{children:s.worker_ids.map(d=>e(Cr,{workerId:d},d))})},[Sr,Ir,Pr]=cn(),_r=n=>n!=null&&"username"in n&&"id"in n,Fr=()=>{const n=T(),[t,s]=v.exports.useState(-1),[d]=st(t,400),{data:a}=C(W.all,ut),{data:c,refetch:o}=C(W.detail(d),()=>Ee(d),{enabled:!1});if(v.exports.useEffect(()=>{dn(d)&&d>=4770&&o()},[d]),a==null)return e(b,{});const u=(l,h)=>{fe(h)?n(ze(parseInt(h))):_r(h)&&n(ze(h.id))};return e(me,{disablePortal:!0,options:[...c!=null?[c]:[],...a!=null?a:[]],sx:{width:300},blurOnSelect:!0,autoHighlight:!0,freeSolo:!0,loading:a==null,loadingText:"Loading users...",getOptionLabel:l=>fe(l)?l:l.username,isOptionEqualToValue:(l,h)=>l.id===h.id,renderInput:l=>e(U,{...l,variant:"standard",label:"User Lookup",size:"small"}),onChange:u,onInputChange:(l,h)=>{s(un(h))}})},Or=()=>{const n=x(o=>{var u;return(u=o.userPanel.selectedUser)!=null?u:-1}),t=Ge(),{data:s,isInitialLoading:d}=C(W.detail(n),()=>Ee(n),{refetchInterval:1e3*15}),a=xe(o=>pt(o.id,o.data),{onSuccess:(o,u)=>{t.invalidateQueries({queryKey:W.detail(u.id)})}}),c=Ir();return v.exports.useEffect(()=>{if(s!=null){const o={trusted:s.trusted,flagged:s.flagged,worker_invite:s.worker_invited.toString()};c.setValues(o),c.resetDirty(o)}},[d]),s==null?e(b,{}):e(hn,{component:g,children:e(pn,{size:"small",children:r(mn,{children:[r(j,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e(F,{component:"th",scope:"row",children:e(p,{variant:"body1",children:"Username"})}),e(F,{align:"right",children:r(p,{variant:"body1",children:[s.username," ",s.moderator?"(moderator)":""]})})]}),r(j,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e(F,{component:"th",scope:"row",children:e(p,{variant:"body1",children:"Trusted"})}),e(F,{align:"right",children:e(qe,{...c.getInputProps("trusted",{type:"checkbox"}),size:"small"})})]}),r(j,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e(F,{component:"th",scope:"row",children:e(p,{variant:"body1",children:"Flagged"})}),e(F,{align:"right",children:e(qe,{...c.getInputProps("flagged",{type:"checkbox"}),size:"small"})})]}),r(j,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e(F,{component:"th",scope:"row",children:e(p,{variant:"body1",children:"Worker Invites"})}),e(F,{align:"right",children:e(U,{variant:"standard",type:"number",...c.getInputProps("worker_invite"),sx:{maxWidth:"100px"},InputProps:{inputProps:{min:0},sx:{"& input":{p:"0",textAlign:"right"}}}})})]}),r(j,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e(F,{component:"th",scope:"row",children:e(p,{variant:"body1",children:"Worker Count"})}),e(F,{align:"right",children:e(p,{variant:"body1",children:s.worker_count})})]}),r(j,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e(F,{component:"th",scope:"row",children:e(p,{variant:"body1",children:"Kudos"})}),e(F,{align:"right",children:e(p,{variant:"body1",children:s.kudos})})]}),r(j,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e(F,{component:"th",scope:"row",children:e(p,{variant:"body1",children:"Suspicious"})}),r(F,{sx:{display:"flex",flex:"1 1 0",alignItems:"center",justifyContent:"flex-end",flexDirection:"row"},children:[s.suspicious>0?e(Ue,{onClick:async()=>{const o={reset_suspicion:!0};a.mutate({id:n,data:o})},loading:a.isLoading,variant:"contained",color:"error",sx:{order:0,mr:4},children:"Reset"}):null,e(p,{sx:{order:1},variant:"body1",children:s.suspicious})]})]})]})})})},Dr=()=>{const n=Ge(),t=x(u=>u.userPanel.selectedUser),[s,d]=v.exports.useState(!1),a=Pr({initialValues:{trusted:!1,flagged:!1,worker_invite:"0"}}),c=xe(u=>pt(u.id,u.data),{onSuccess:(u,l)=>{var f,O,_,G;n.setQueryData(W.detail(l.id),H=>H!=null?{...H,...u}:u);const h={trusted:(f=u.trusted)!=null?f:!1,flagged:(O=u.flagged)!=null?O:!1,worker_invite:(G=(_=u.worker_invite)==null?void 0:_.toString())!=null?G:"0"};J(h)||(a.setValues(h),a.resetDirty(h)),d(!0)}}),o=(u,l)=>{l!=="clickaway"&&d(!1)};return r(se,{elevation:1,sx:{p:2,height:"100%"},children:[e(rt,{open:s,autoHideDuration:6e3,onClose:o,anchorOrigin:{vertical:"top",horizontal:"right"},children:e(at,{onClose:o,severity:"success",sx:{width:"100%",border:"2px solid #a3a3a3"},children:"Changes successfully saved!"})}),r("form",{onSubmit:a.onSubmit((u,l)=>{if(t!=null){const h={trusted:u.trusted,flagged:u.flagged,worker_invite:parseInt(u.worker_invite)};c.mutate({id:t,data:h})}}),children:[r(g,{display:"flex",justifyContent:"space-between",children:[e(Fr,{}),t!=null?r(g,{display:"flex",alignItems:"center",children:[a.isDirty()?e(k,{sx:{mr:2},variant:"contained",type:"submit",children:"Save"}):null,e(gn,{})]}):null]}),e(Sr,{form:a,children:e(g,{display:"flex",children:t!=null&&t!=-1?e(Or,{}):null})})]})]})},Tr=()=>{const n=x(t=>t.userPanel.selectedUser);return r(m,{container:!0,spacing:2,children:[e(m,{item:!0,md:12,lg:6,xl:4,children:e(Dr,{})}),n!=null?e(wr,{userId:n}):null]})},Mr=()=>{const n=T(),t=x(o=>o.utilityPanel.prompt),{data:s,refetch:d,isFetching:a}=C(["promptCheck",t],()=>ar({filter_type:0,prompt:t}),{enabled:!1});return e(se,{elevation:1,sx:{p:2,height:"100%"},children:r(g,{children:[r(g,{display:"flex",justifyContent:"space-between",children:[e(p,{variant:"h4",children:"Prompt Checker"}),e(Ue,{onClick:()=>{J(t)||d()},loading:a,variant:"contained",children:"Submit"})]}),e(U,{sx:{my:2},variant:"standard",multiline:!0,fullWidth:!0,value:t,onChange:o=>{n(Hn(o.target.value))},placeholder:"Enter prompt"}),s!=null?r(g,{pt:2,children:[r(p,{variant:"body1",children:["Suspicion: ",s.suspicion]}),s.suspicion>0?r(p,{variant:"body1",children:["Matches: ",JSON.stringify(s.matches)]}):null]}):null]})})},Lr=()=>e(m,{container:!0,spacing:2,children:e(m,{item:!0,md:12,lg:6,xl:4,children:e(Mr,{})})}),Wr=()=>{const n=x(c=>c.workerPanel.workerFilter),[t,s]=v.exports.useState(n!=null?n:""),[d]=st(t,400),a=T();return v.exports.useEffect(()=>{a(jn(d))},[d]),e(U,{sx:{mr:2},label:"Search & Filter",variant:"outlined",value:t,onChange:c=>{s(c.target.value)}})},Ur=()=>{const n=T(),t=x(u=>u.workerPanel.sortKey),s=x(u=>u.workerPanel.order),d=x(u=>u.workerPanel.workerFilter),{data:a}=C($.all,()=>$e(),{refetchInterval:1e3*30,select:u=>{const l=d==null?void 0:d.toLowerCase();return ge(u.filter(h=>{var f;return l==null?!0:h.name.toLowerCase().includes(l)||((f=h.owner)!=null?f:"").toLowerCase().includes(l)||h.id.toLowerCase().includes(l)}).map(h=>({...h,performance:h.performance.replace(" megapixelsteps per second","")})),[h=>{const f=h[t];return fe(f)?f.toLowerCase():f}],[s])}}),c=u=>{n(zn(u.target.value))},o=u=>{n(Vn(u))};return a==null?e(b,{}):r(b,{children:[r(g,{display:"flex",justifyContent:"space-between",pb:2,children:[r(g,{display:"flex",alignItems:"center",children:[e(p,{variant:"h5",sx:{mr:{xs:1,md:2}},children:"Worker List"}),e(Wr,{})]}),r(g,{display:"flex",justifyContent:"flex-end",alignItems:"center",children:[r(tt,{sx:{mr:1},children:[e(nt,{children:"Sort Key"}),r(Xe,{value:t,label:"Sort Key",onChange:c,sx:{".MuiSelect-select":{py:1}},children:[e(B,{value:"name",children:"Name"}),e(B,{value:"performance",children:"Performance"}),e(B,{value:"uptime",children:"Uptime"}),e(B,{value:"megapixelsteps_generated",children:"MPS Generated"})]})]}),s==="asc"?e(L,{onClick:()=>o("desc"),children:e(fn,{})}):e(L,{onClick:()=>o("asc"),children:e(xn,{})})]})]}),e(m,{container:!0,spacing:2,children:a.map(u=>e(gt,{worker:u},u.id))})]})},Qe=()=>{const{data:n,isLoading:t,error:s}=C(["mode"],ct);if(t)return e(p,{variant:"h6",children:"Loading Horde status ..."});if(n==null||s)return console.log("HordeStatus error",s),e(p,{variant:"h6",children:"Error loading Horde status"});const d=a=>a?e(Be,{sx:{color:ne,ml:1}}):e(Be,{sx:{color:We,ml:1}});return r(pe,{children:[r(K,{children:[e(Se,{children:d(n.maintenance_mode)}),e(q,{primary:"Maintenance"})]}),r(K,{children:[e(Se,{children:d(n.invite_only_mode)}),e(q,{primary:"Invite Only"})]}),n.raid_mode!=null?r(K,{children:[e(Se,{children:d(n.raid_mode)}),e(q,{primary:"Raid"})]}):null]})},Ze=()=>{const{data:n,isLoading:t,error:s}=C(["performance"],dt);return t?e(p,{variant:"h6",children:"Loading Horde status ..."}):n==null||s?e(p,{variant:"h6",children:"Error loading Horde status"}):r(pe,{children:[e(K,{children:e(q,{primary:`Queued Requests: ${n.queued_requests}`})}),e(K,{children:e(q,{primary:`Queued MPS: ${n.queued_megapixelsteps}`})}),e(K,{children:e(q,{primary:`Past Minute MPS: ${n.past_minute_megapixelsteps}`})}),e(K,{children:e(q,{primary:`Workers: ${n.worker_count}`})})]})},ce=240,Gr=()=>{const n=T(),t=x(d=>d.localState.sidebarOpen);return r(b,{children:[r(He,{variant:"temporary",open:t,onClose:()=>{n(ot(!t))},ModalProps:{keepMounted:!0},sx:{display:{xs:"block",md:"none"},width:ce,flexShrink:0,"& .MuiDrawer-paper":{boxSizing:"border-box",width:ce}},children:[e(Ie,{}),r(g,{sx:{overflow:"auto"},children:[e(Ze,{}),e(ae,{}),e(Qe,{})]})]}),r(He,{variant:"permanent",sx:{display:{xs:"none",md:"block"},width:ce,flexShrink:0,["& .MuiDrawer-paper"]:{width:ce,boxSizing:"border-box"}},children:[e(Ie,{}),r(g,{sx:{overflow:"auto"},children:[e(Ze,{}),e(ae,{}),e(Qe,{})]})]})]})},Er=()=>{const n=T(),t=x(d=>d.persist.selectedTab);return r(g,{display:"flex",children:[e(Gr,{}),e(g,{display:"flex",flexDirection:"column",flex:"1 1 auto",children:r(yn,{value:t,children:[e(g,{sx:{borderBottom:1,borderColor:"divider"},children:r(bn,{onChange:(d,a)=>{a!="4"&&n(De(!1)),n(Gn(a))},"aria-label":"lab API tabs example",children:[e(ee,{label:"User Lookup",value:"1"}),e(ee,{label:"Workers",value:"2"}),e(ee,{label:"Comparator",value:"3"}),e(ee,{label:"Utilities",value:"4"}),e(ee,{label:"Settings",value:"5"})]})}),e(te,{value:"1",children:e(Tr,{})}),e(te,{value:"2",children:e(Ur,{})}),e(te,{value:"3",children:e(yr,{})}),e(te,{value:"4",children:e(Lr,{})}),e(te,{value:"5",children:e(br,{})})]})})]})},de=()=>{const n=T(),t=x(d=>d.localState.sidebarOpen);return e(kn,{position:"sticky",sx:{zIndex:d=>d.zIndex.drawer+1},children:r(Ie,{children:[e(L,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:()=>{n(ot(!t))},sx:{mr:2,display:{md:"none"}},children:e(vn,{})}),e(p,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1},children:"Horde Control Tower"}),null]})})},$r=async n=>{const t=window.document.createElement("canvas"),s=window.Image,d=(await Promise.allSettled([n].map(async c=>await new Promise((o,u)=>{let l;Cn(c,"src")?l=c:l={src:c};const h=new s;h.onerror=()=>u(new Error("Couldn't load image")),h.onload=()=>o({...l,img:h}),h.src=l.src,h.crossOrigin="anonymous"})))).filter(c=>c.status==="fulfilled").map(c=>c.value),a=t.getContext("2d");if(a==null)throw new Error("Couldn't create canvas context");{const c=o=>Math.max(...d.map(u=>{var l,h;return(h=(l=u==null?void 0:u.img)==null?void 0:l[o])!=null?h:0}));return t.width=c("width"),t.height=c("height"),d.forEach(o=>{var u,l;if(o!=null&&(a.globalAlpha=o.opacity!=null?o.opacity:1,o.img!=null))return a.drawImage(o.img,(u=o.x)!=null?u:0,(l=o.y)!=null?l:0)}),t.toDataURL("image/webp")}},Ar=n=>{const{gen:t,...s}=n,d=T();return C(["check",t.id],()=>lr(t.id),{refetchInterval:2e3,enabled:t.state==="check",onSuccess:a=>{if(t.state==="check"){let c=t.state;a.faulted?c="error":a.done&&(c="status"),d(he({...t,state:c,check:a}))}}}),C(["status",t.id],()=>ir(t.id),{refetchInterval:!1,enabled:t.state==="status",onSuccess:async a=>{if(t.state==="status"){let c=t.state;if(a.faulted)c="error";else if(a.done){c="complete";const o=await $r(a.generations[0].img);a.generations[0].img=o}d(he({...t,state:c,status:a}))}}}),C(["delete",t.id],()=>or(t.id),{refetchInterval:!1,retry:!1,enabled:t.state==="delete",onSuccess:async a=>{d(he({...t,state:"complete",status:a}))}}),e(b,{})},Rr=()=>{const n=x(t=>t.persist.imageGens);return J(n)?e(b,{}):e(b,{children:n.map(t=>e(Ar,{gen:t},t.id))})},Kr=()=>{const n=x(a=>a.persist.apikey),{data:t,refetch:s,isLoading:d}=C(["findUser"],()=>tr(n),{enabled:!J(n),retry:1});return v.exports.useEffect(()=>{s()},[n]),d?r(g,{display:"flex",flexDirection:"column",sx:{height:"100%"},children:[e(de,{}),e(g,{sx:{display:"flex",flex:"1 1 auto"},justifyContent:"center",alignItems:"center",children:e(Ye,{})})]}):J(n)||t==null?r(g,{display:"flex",flexDirection:"column",sx:{height:"100%"},children:[e(de,{}),r(g,{display:"flex",flex:"1 1 auto",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[e(p,{variant:"h4",children:"Please enter your API key."}),e(mt,{})]})]}):t.moderator?r(g,{sx:{display:"flex",flexDirection:"column"},children:[e(Rr,{}),e(cr,{}),e(de,{}),e(Er,{})]}):r(g,{display:"flex",flexDirection:"column",sx:{height:"100%"},children:[e(de,{}),e(g,{sx:{display:"flex",flex:"1 1 auto"},justifyContent:"center",alignItems:"center",children:e(p,{variant:"h4",children:"Sorry, you really need to be a moderator to access these utilities :("})})]})};z.prototype.__toHuman__=z.prototype.toHuman;z.prototype.toHuman=function(n={stripZeroUnits:"all"}){let t=this.normalize(),s=[],d=typeof n.precision=="object"?z.fromObject(n.precision):z.fromMillis(0),a=t;const c=["years","months","days","hours","minutes","seconds","milliseconds"];let o,u;n.smallestUnit&&(o=c.indexOf(n.smallestUnit)),n.biggestUnit&&(u=c.indexOf(n.biggestUnit)),(!o||!(o>=0&&o<c.length))&&(o=c.indexOf("seconds")),(!u||!(u<=o&&u<c.length))&&(u=c.indexOf("years"));for(let l of c.slice(u,o+1)){if(a.as(l)>=1){s.push(l);let f={};if(f[l]=Math.floor(a.as(l)),a=a.minus(z.fromObject(f)).normalize(),a<d)break}if(n.maxUnits&&s.length>=n.maxUnits)break}if(t=t.minus(a).normalize(),t=t.shiftTo(...s),n.stripZeroUnits=="all")s=s.filter(l=>t.values[l]>0);else if(n.stripZeroUnits=="end"){let l=!0;s=s.reverse().filter(h=>l?t.values[h]==0?!1:(l=!1,!0):!0)}return s.length||s.push(c[o]),t.shiftTo(...s).__toHuman__(n)};const qr=wn({key:"mui",prepend:!0}),Br=Sn({palette:{mode:"dark"}}),Hr=new In({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});Pn(document.getElementById("root")).render(e(_n,{value:qr,children:r(Fn,{theme:Br,children:[e(On,{}),r(Dn,{client:Hr,children:[e(Tn,{store:ye,children:e(Mn,{loading:null,persistor:Xn,children:e(Kr,{})})}),null]})]})}));
