import{c as $,a as We,b as De,p as Oe,d as $e,e as Ke,s as Ae,f as Be,F as Re,R as je,P as Ee,g as He,h as qe,i as ze,j as ge,u as x,k as e,l as m,m as Qe,n as Ne,o as n,q as ye,I as xe,r as Ve,t as Ge,v as I,V as Ze,w as Je,G as _,x as ae,y as Ye,z as C,A as be,B as Xe,C as et,D as J,T as E,E as tt,H as se,J as ie,K as rt,L as p,M as nt,N as at,O as L,Q as g,S as u,U as oe,W as ve,X as ke,Y as Ce,Z as y,_ as st,$ as R,a0 as it,a1 as lt,a2 as ot,a3 as k,a4 as ct,a5 as dt,a6 as ce,a7 as de,a8 as ut,a9 as ht,aa as pt,ab as mt,ac as F,ad as ft,ae as gt,af as yt,ag as xt,ah as M,ai as ue,aj as Se,ak as O,al as bt,am as q,an as vt,ao as kt,ap as we,aq as W,ar as Z,as as D,at as he,au as Ct,av as Pe,aw as St,ax as wt,ay as Pt,az as z,aA as Q,aB as _t,aC as It,aD as Ut,aE as Tt,aF as Lt,aG as Mt,aH as Ft,aI as Wt,aJ as Dt,aK as Ot,aL as $t,aM as Kt}from"./vendor.ca6bad13.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function a(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerpolicy&&(c.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?c.credentials="include":s.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(s){if(s.ep)return;s.ep=!0;const c=a(s);fetch(s.href,c)}})();const At={},pe=$({name:"localState",initialState:At,reducers:{}}),_e={apikey:"",selectedTab:"1",favorites:[]},j=$({name:"persist",initialState:_e,reducers:{setKey:(t,r)=>{t.apikey=r.payload},setSelectedTab:(t,r)=>{t.selectedTab=r.payload}}}),{setKey:Bt,setSelectedTab:Rt}=j.actions,jt={showPassword:!1},Y=$({name:"settingsPanel",initialState:jt,reducers:{setShowPassword:(t,r)=>{t.showPassword=r.payload}}}),{setShowPassword:X}=Y.actions,Et={},ee=$({name:"userPanel",initialState:Et,reducers:{setUser:(t,r)=>{t.selectedUser=r.payload}}}),{setUser:me}=ee.actions,Ht={prompt:""},te=$({name:"utilityPanel",initialState:Ht,reducers:{setPrompt:(t,r)=>{t.prompt=r.payload}}}),{setPrompt:qt}=te.actions,zt={sortKey:"name",order:"asc"},re=$({name:"workerPanel",initialState:zt,reducers:{setWorkerFilter:(t,r)=>{t.workerFilter=r.payload},setSortKey:(t,r)=>{t.sortKey=r.payload},setOrder:(t,r)=>{t.order=r.payload}}}),{setWorkerFilter:Qt,setSortKey:Nt,setOrder:Vt}=re.actions,Gt=We((t,r)=>t,(t,r)=>Object.assign({},_e,t),{whitelist:[j.name]}),Zt={key:"root",storage:Be,whitelist:[j.name],transforms:[Gt]},Jt=De({[j.name]:j.reducer,[pe.name]:pe.reducer,[Y.name]:Y.reducer,[ee.name]:ee.reducer,[te.name]:te.reducer,[re.name]:re.reducer}),Yt=Oe(Zt,Jt),V=$e({reducer:Yt,middleware:t=>t({serializableCheck:{ignoredActions:[Re,je,Ee,He,qe,ze]}}),devTools:!1}),Xt=Ke(V);Ae(V.dispatch);const P=ge.create({baseURL:"https://stablehorde.net/api/v2/"});P.interceptors.request.use(function(t){const r=V.getState().persist.apikey;return t.headers!=null&&r!=null&&(t.headers.apikey=r),t},function(t){return Promise.reject(t)});const er=ge.create({baseURL:"/horde-control-tower/"}),tr=t=>P.get("find_user",{headers:{apikey:t}}).then(r=>r.data),Ie=()=>P.get("status/modes").then(t=>t.data),Ue=()=>P.get("status/performance").then(t=>t.data),Te=()=>er.get("users.json").then(t=>t.data),le=t=>P.get(`users/${t}`).then(r=>r.data),rr=()=>P.get("workers").then(t=>t.data),nr=t=>P.get(`workers/${t}`).then(r=>r.data),Le=(t,r)=>P.put(`users/${t}`,r).then(a=>a.data),ar=(t,r)=>P.put(`workers/${t}`,r).then(a=>a.data),sr=t=>P.post("filters",t).then(r=>r.data),S={all:["users"],lists:()=>[...S.all,"list"],list:t=>[...S.lists(),{filters:t}],details:()=>[...S.all,"detail"],detail:t=>[...S.details(),t]},U={all:["workers"],lists:()=>[...U.all,"list"],list:t=>[...U.lists(),{filters:t}],details:()=>[...U.all,"detail"],detail:t=>[...U.details(),t]},ir=()=>(x(S.all,Te,{staleTime:1e3*30,refetchInterval:1e3*30}),x(["performance"],Ue,{staleTime:1e3*30,refetchInterval:1e3*30}),x(["mode"],Ie,{staleTime:1e3*30,refetchInterval:1e3*30}),e(m,{})),K=()=>Ne(),b=Qe,Me=()=>{const t=K(),r=b(s=>s.persist.apikey),a=b(s=>s.settingsPanel.showPassword);return n(ye,{sx:{m:1,width:"35ch"},variant:"standard",children:[e(xe,{children:"API Key"}),e(Ve,{defaultValue:r,onBlur:s=>{t(Bt(s.target.value)),t(X(!1))},type:a?"text":"password",endAdornment:e(Ge,{position:"end",children:e(I,{onClick:()=>t(X(!a)),children:a?e(Ze,{}):e(Je,{})})})})]})},lr=()=>e(_,{container:!0,spacing:2,children:e(_,{item:!0,md:12,lg:6,xl:4,children:e(ae,{children:e(Me,{})})})}),[or,cr,dr]=Ye(),ur=t=>t!=null&&"username"in t&&"id"in t,hr=()=>{const t=K(),[r,a]=C.exports.useState(-1),[o]=be(r,400),{data:s}=x(S.all,Te),{data:c,refetch:i}=x(S.detail(o),()=>le(o),{enabled:!1});if(C.exports.useEffect(()=>{Xe(o)&&o>=4770&&i()},[o]),s==null)return e(m,{});const l=(d,h)=>{J(h)?t(me(parseInt(h))):ur(h)&&t(me(h.id))};return e(et,{disablePortal:!0,options:[...c!=null?[c]:[],...s!=null?s:[]],sx:{width:300},blurOnSelect:!0,autoHighlight:!0,freeSolo:!0,loading:s==null,loadingText:"Loading users...",getOptionLabel:d=>J(d)?d:d.username,isOptionEqualToValue:(d,h)=>d.id===h.id,renderInput:d=>e(E,{...d,variant:"standard",label:"User Lookup",size:"small"}),onChange:l,onInputChange:(d,h)=>{a(tt(h))}})},pr=()=>{const t=b(i=>{var l;return(l=i.userPanel.selectedUser)!=null?l:-1}),r=se(),{data:a,isInitialLoading:o}=x(S.detail(t),()=>le(t),{refetchInterval:1e3*15}),s=ie(i=>Le(i.id,i.data),{onSuccess:(i,l)=>{r.invalidateQueries({queryKey:S.detail(l.id)})}}),c=cr();return C.exports.useEffect(()=>{if(a!=null){const i={trusted:a.trusted,flagged:a.flagged,worker_invite:a.worker_invited.toString()};c.setValues(i),c.resetDirty(i)}},[o]),a==null?e(m,{}):e(rt,{component:p,children:e(nt,{size:"small",children:n(at,{children:[n(L,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e(g,{component:"th",scope:"row",children:e(u,{variant:"body1",children:"Username"})}),e(g,{align:"right",children:n(u,{variant:"body1",children:[a.username," ",a.moderator?"(moderator)":""]})})]}),n(L,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e(g,{component:"th",scope:"row",children:e(u,{variant:"body1",children:"Trusted"})}),e(g,{align:"right",children:e(oe,{...c.getInputProps("trusted",{type:"checkbox"}),size:"small"})})]}),n(L,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e(g,{component:"th",scope:"row",children:e(u,{variant:"body1",children:"Flagged"})}),e(g,{align:"right",children:e(oe,{...c.getInputProps("flagged",{type:"checkbox"}),size:"small"})})]}),n(L,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e(g,{component:"th",scope:"row",children:e(u,{variant:"body1",children:"Worker Invites"})}),e(g,{align:"right",children:e(E,{variant:"standard",type:"number",...c.getInputProps("worker_invite"),sx:{maxWidth:"100px"},InputProps:{inputProps:{min:0},sx:{"& input":{p:"0",textAlign:"right"}}}})})]}),n(L,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e(g,{component:"th",scope:"row",children:e(u,{variant:"body1",children:"Worker Count"})}),e(g,{align:"right",children:e(u,{variant:"body1",children:a.worker_count})})]}),n(L,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e(g,{component:"th",scope:"row",children:e(u,{variant:"body1",children:"Kudos"})}),e(g,{align:"right",children:e(u,{variant:"body1",children:a.kudos})})]}),n(L,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e(g,{component:"th",scope:"row",children:e(u,{variant:"body1",children:"Suspicious"})}),n(g,{sx:{display:"flex",flex:"1 1 0",alignItems:"center",justifyContent:"flex-end",flexDirection:"row"},children:[a.suspicious>0?e(ve,{onClick:async()=>{const i={reset_suspicion:!0};s.mutate({id:t,data:i})},loading:s.isLoading,variant:"contained",color:"error",sx:{order:0,mr:4},children:"Reset"}):null,e(u,{sx:{order:1},variant:"body1",children:a.suspicious})]})]})]})})})},mr=()=>{const t=se(),r=b(l=>l.userPanel.selectedUser),[a,o]=C.exports.useState(!1),s=dr({initialValues:{trusted:!1,flagged:!1,worker_invite:"0"}}),c=ie(l=>Le(l.id,l.data),{onSuccess:(l,d)=>{var f,H,T,A;t.setQueryData(S.detail(d.id),G=>G!=null?{...G,...l}:l);const h={trusted:(f=l.trusted)!=null?f:!1,flagged:(H=l.flagged)!=null?H:!1,worker_invite:(A=(T=l.worker_invite)==null?void 0:T.toString())!=null?A:"0"};R(h)||(s.setValues(h),s.resetDirty(h)),o(!0)}}),i=(l,d)=>{d!=="clickaway"&&o(!1)};return n(ae,{elevation:1,sx:{p:2,height:"100%"},children:[e(ke,{open:a,autoHideDuration:6e3,onClose:i,anchorOrigin:{vertical:"top",horizontal:"right"},children:e(Ce,{onClose:i,severity:"success",sx:{width:"100%",border:"2px solid #a3a3a3"},children:"Changes successfully saved!"})}),n("form",{onSubmit:s.onSubmit((l,d)=>{if(r!=null){const h={trusted:l.trusted,flagged:l.flagged,worker_invite:parseInt(l.worker_invite)};c.mutate({id:r,data:h})}}),children:[n(p,{display:"flex",justifyContent:"space-between",children:[e(hr,{}),r!=null?n(p,{display:"flex",alignItems:"center",children:[s.isDirty()?e(y,{sx:{mr:2},variant:"contained",type:"submit",children:"Save"}):null,e(st,{})]}):null]}),e(or,{form:s,children:e(p,{display:"flex",children:r!=null&&r!=-1?e(pr,{}):null})})]})]})},ne="#0583B0",B="#FF6962",fr="#7c0500",gr="#ef9b0f",Fe=t=>{const{worker:r}=t,a=se(),[o,s]=C.exports.useState(!1),[c,i]=C.exports.useState(!1),[l,d]=C.exports.useState("setFlagged"),[h,f]=C.exports.useState(""),H=v=>parseFloat(v.performance)>3?gr:v.maintenance_mode||v.paused||v.flagged?fr:"background.paper",T=ie(v=>ar(v.id,v.data),{onSuccess:(v,w)=>{s(!0),a.invalidateQueries({queryKey:U.detail(w.id)}),a.invalidateQueries({queryKey:U.all})}}),A=(v,w)=>{w!=="clickaway"&&s(!1)};return n(m,{children:[e(it,{open:c,onClose:()=>i(!1),children:(v=>{switch(v){case"setFlagged":return n(m,{children:[n(M,{children:['Set "',r.name,'" as Flagged']}),n(O,{children:[e(y,{onClick:()=>{i(!1)},children:"Cancel"}),e(y,{onClick:()=>{i(!1)},children:"Confirm"})]})]});case"unsetFlagged":return n(m,{children:[n(M,{children:['Unset "',r.name,'" as Flagged']}),n(O,{children:[e(y,{onClick:()=>i(!1),children:"Cancel"}),e(y,{onClick:()=>{i(!1)},children:"Confirm"})]})]});case"setMaintenance":return n(m,{children:[n(M,{children:['Set "',r.name,'" Maintenance Mode']}),e(ue,{children:e(E,{value:h,onChange:w=>{f(w.target.value)},multiline:!0,autoFocus:!0,margin:"dense",id:"name",label:"Maintenance Reason (optional)",fullWidth:!0,variant:"standard"})}),n(O,{children:[e(y,{onClick:()=>i(!1),children:"Cancel"}),e(y,{onClick:()=>{const w={maintenance:!0};R(h)||(w.maintenance_msg=h),T.mutate({id:r.id,data:w}),i(!1)},children:"Confirm"})]})]});case"unsetMaintenance":return n(m,{children:[n(M,{children:['Unset "',r.name,'" Maintenance Mode']}),n(O,{children:[e(y,{onClick:()=>i(!1),children:"Cancel"}),e(y,{onClick:()=>{T.mutate({id:r.id,data:{maintenance:!1,maintenance_msg:""}}),i(!1)},children:"Confirm"})]})]});case"setPaused":return n(m,{children:[n(M,{children:['Set "',r.name,'" Paused Mode']}),n(O,{children:[e(y,{onClick:()=>i(!1),children:"Cancel"}),e(y,{onClick:()=>{T.mutate({id:r.id,data:{paused:!0}}),i(!1)},children:"Confirm"})]})]});case"unsetPaused":return n(m,{children:[n(M,{children:['Unset "',r.name,'" Paused Mode']}),n(O,{children:[e(y,{onClick:()=>i(!1),children:"Cancel"}),e(y,{onClick:()=>{T.mutate({id:r.id,data:{paused:!1}}),i(!1)},children:"Confirm"})]})]});case"listModels":return n(m,{children:[n(M,{children:['"',r.name,'" Models']}),e(ue,{children:e(u,{variant:"body1",children:Se(r.models,[w=>w.toLowerCase()]).join(", ")})})]})}})(l)}),e(ke,{open:o,autoHideDuration:6e3,onClose:A,anchorOrigin:{vertical:"top",horizontal:"right"},children:e(Ce,{onClose:A,severity:"success",sx:{width:"100%",border:"2px solid #a3a3a3"},children:"Changes successfully saved!"})}),e(_,{item:!0,md:12,lg:6,xl:3,children:n(lt,{sx:{backgroundColor:H(r)},children:[e(ot,{avatar:r.online&&!r.paused&&!r.maintenance_mode&&!r.flagged?e(k,{title:"Worker Online",children:e(ct,{sx:{color:ne}})}):e(k,{title:"Worker Issue",children:e(dt,{sx:{color:B}})}),action:n(p,{children:[r.paused?e(k,{title:"Worker Paused",children:e(ce,{sx:{color:B,mt:.5,mr:1}})}):null,r.maintenance_mode?e(k,{title:"Worker Maintenance",children:e(de,{sx:{color:B,mt:.5,mr:1}})}):null,r.flagged?e(k,{title:"User Flagged",children:e(ut,{sx:{color:B,mt:.5,mr:1}})}):null,r.trusted?e(k,{title:"Trusted Worker",children:e(ht,{sx:{color:ne,mt:.5,mr:1}})}):null]}),title:e(u,{variant:"h5",children:pt(r.name,{length:30})}),subheader:r.id}),n(mt,{children:[n(u,{variant:"body2",children:["Full Name: ",r.name]}),n(u,{variant:"body2",children:["Owner: ",r.owner]}),n(u,{variant:"body2",children:["Uptime: ",F.fromObject({seconds:r.uptime}).toHuman()]}),n(u,{variant:"body2",children:["Models Loaded: ",r.models.length]}),n(u,{variant:"body2",children:["MPS Generated: ",r.megapixelsteps_generated]}),n(u,{variant:"body2",children:["Speed: ",r.performance," MPS"]}),n(u,{variant:"body2",children:["Threads: ",r.threads]}),n(u,{variant:"body2",children:["Requests Fulfilled: ",r.requests_fulfilled]}),n(u,{variant:"body2",children:["NSFW: ",r.nsfw?"true":"false"]})]}),n(ft,{disableSpacing:!0,children:[e(k,{title:"Show Worker Models",children:e(I,{onClick:()=>{d("listModels"),i(!0)},children:e(gt,{})})}),r.maintenance_mode?e(k,{title:"Unset Worker Maintenance",children:e(I,{onClick:()=>{d("unsetMaintenance"),i(!0)},children:e(yt,{})})}):e(k,{title:"Set Worker Maintenance",children:e(I,{onClick:()=>{d("setMaintenance"),i(!0)},children:e(de,{})})}),r.paused?e(k,{title:"Unset Worker Pause",children:e(I,{onClick:()=>{d("unsetPaused"),i(!0)},children:e(xt,{})})}):e(k,{title:"Set Worker Pause",children:e(I,{onClick:()=>{d("setPaused"),i(!0)},children:e(ce,{})})})]})]})},r.id)]})},yr=t=>{const{workerId:r}=t,{data:a}=x(U.detail(r),()=>nr(r),{staleTime:1e3*61,select:o=>({...o,performance:o.performance.replace(" megapixelsteps per second","")})});return a==null?e(m,{}):e(Fe,{worker:a})},xr=t=>{const{userId:r}=t,{data:a}=x(S.detail(r),()=>le(r));return a==null?e(m,{}):a.worker_ids.length===0?e(_,{item:!0,md:12,lg:6,xl:4,children:e(u,{variant:"body1",children:"This user has no workers."})}):e(m,{children:a.worker_ids.map(o=>e(yr,{workerId:o},o))})},br=()=>{const t=b(r=>r.userPanel.selectedUser);return n(_,{container:!0,spacing:2,children:[e(_,{item:!0,md:12,lg:6,xl:4,children:e(mr,{})}),t!=null?e(xr,{userId:t}):null]})},vr=()=>{const t=K(),r=b(i=>i.utilityPanel.prompt),{data:a,refetch:o,isFetching:s}=x(["promptCheck",r],()=>sr({filter_type:0,prompt:r}),{enabled:!1});return e(ae,{elevation:1,sx:{p:2,height:"100%"},children:n(p,{children:[n(p,{display:"flex",justifyContent:"space-between",children:[e(u,{variant:"h4",children:"Prompt Checker"}),e(ve,{onClick:()=>{R(r)||o()},loading:s,variant:"contained",children:"Submit"})]}),e(E,{sx:{my:2},variant:"standard",multiline:!0,fullWidth:!0,value:r,onChange:i=>{t(qt(i.target.value))},placeholder:"Enter prompt"}),a!=null?n(p,{pt:2,children:[n(u,{variant:"body1",children:["Suspicion: ",a.suspicion]}),a.suspicion>0?n(u,{variant:"body1",children:["Matches: ",JSON.stringify(a.matches)]}):null]}):null]})})},kr=()=>e(_,{container:!0,spacing:2,children:e(_,{item:!0,md:12,lg:6,xl:4,children:e(vr,{})})}),Cr=()=>{const t=b(c=>c.workerPanel.workerFilter),[r,a]=C.exports.useState(t!=null?t:""),[o]=be(r,400),s=K();return C.exports.useEffect(()=>{s(Qt(o))},[o]),e(E,{label:"Search & Filter",variant:"outlined",value:r,onChange:c=>{a(c.target.value)}})},Sr=()=>{const t=K(),r=b(l=>l.workerPanel.sortKey),a=b(l=>l.workerPanel.order),o=b(l=>l.workerPanel.workerFilter),{data:s}=x(U.all,()=>rr(),{refetchInterval:1e3*30,select:l=>{const d=o==null?void 0:o.toLowerCase();return Se(l.filter(h=>{var f;return d==null?!0:h.name.toLowerCase().includes(d)||((f=h.owner)!=null?f:"").toLowerCase().includes(d)||h.id.toLowerCase().includes(d)}).map(h=>({...h,performance:h.performance.replace(" megapixelsteps per second","")})),[h=>{const f=h[r];return J(f)?f.toLowerCase():f}],[a])}}),c=l=>{t(Nt(l.target.value))},i=l=>{t(Vt(l))};return s==null?e(m,{}):n(m,{children:[n(p,{display:"flex",justifyContent:"space-between",pb:2,children:[n(p,{display:"flex",alignItems:"center",children:[e(u,{variant:"h5",sx:{mr:2},children:"Worker List"}),e(Cr,{})]}),n(p,{display:"flex",justifyContent:"flex-end",alignItems:"center",children:[n(ye,{sx:{mr:1},children:[e(xe,{children:"Sort Key"}),n(bt,{value:r,label:"Sort Key",onChange:c,sx:{".MuiSelect-select":{py:1}},children:[e(q,{value:"name",children:"Name"}),e(q,{value:"performance",children:"Performance"}),e(q,{value:"uptime",children:"Uptime"}),e(q,{value:"megapixelsteps_generated",children:"MPS Generated"})]})]}),a==="asc"?e(I,{onClick:()=>i("desc"),children:e(vt,{})}):e(I,{onClick:()=>i("asc"),children:e(kt,{})})]})]}),e(_,{container:!0,spacing:2,children:s.map(l=>e(Fe,{worker:l},l.id))})]})},wr=()=>{const{data:t,isLoading:r,error:a}=x(["mode"],Ie);if(r)return e(u,{variant:"h6",children:"Loading Horde status ..."});if(t==null||a)return console.log("HordeStatus error",a),e(u,{variant:"h6",children:"Error loading Horde status"});const o=s=>s?e(he,{sx:{color:B,ml:1}}):e(he,{sx:{color:ne,ml:1}});return n(we,{children:[n(W,{children:[e(Z,{children:o(t.maintenance_mode)}),e(D,{primary:"Maintenance"})]}),n(W,{children:[e(Z,{children:o(t.invite_only_mode)}),e(D,{primary:"Invite Only"})]}),t.raid_mode!=null?n(W,{children:[e(Z,{children:o(t.raid_mode)}),e(D,{primary:"Raid"})]}):null]})},Pr=()=>{const{data:t,isLoading:r,error:a}=x(["performance"],Ue);return r?e(u,{variant:"h6",children:"Loading Horde status ..."}):t==null||a?(console.log("Performance error",a),e(u,{variant:"h6",children:"Error loading Horde status"})):n(we,{children:[e(W,{children:e(D,{primary:`Queued Requests: ${t.queued_requests}`})}),e(W,{children:e(D,{primary:`Queued MPS: ${t.queued_megapixelsteps}`})}),e(W,{children:e(D,{primary:`Past Minute MPS: ${t.past_minute_megapixelsteps}`})}),e(W,{children:e(D,{primary:`Workers: ${t.worker_count}`})})]})},fe=240,_r=()=>n(Ct,{variant:"permanent",sx:{width:fe,flexShrink:0,["& .MuiDrawer-paper"]:{width:fe,boxSizing:"border-box"}},children:[e(Pe,{}),n(p,{sx:{overflow:"auto"},children:[e(Pr,{}),e(St,{}),e(wr,{})]})]}),Ir=()=>{const t=K(),r=b(o=>o.persist.selectedTab);return n(p,{display:"flex",children:[e(_r,{}),e(p,{display:"flex",flexDirection:"column",flex:"1 1 auto",children:n(wt,{value:r,children:[e(p,{sx:{borderBottom:1,borderColor:"divider"},children:n(Pt,{onChange:(o,s)=>{s!="4"&&t(X(!1)),t(Rt(s))},"aria-label":"lab API tabs example",children:[e(z,{label:"User Lookup",value:"1"}),e(z,{label:"Workers",value:"2"}),e(z,{label:"Utilities",value:"3"}),e(z,{label:"Settings",value:"4"})]})}),e(Q,{value:"1",children:e(br,{})}),e(Q,{value:"2",children:e(Sr,{})}),e(Q,{value:"3",children:e(kr,{})}),e(Q,{value:"4",children:e(lr,{})})]})})]})},N=()=>e(_t,{position:"static",sx:{zIndex:t=>t.zIndex.drawer+1},children:e(Pe,{children:e(u,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1,display:{xs:"none",sm:"block"}},children:"Horde Control Tower"})})}),Ur=()=>{const t=b(s=>s.persist.apikey),{data:r,refetch:a,isLoading:o}=x(["findUser"],()=>tr(t),{enabled:!R(t),retry:1});return C.exports.useEffect(()=>{a()},[t]),o?n(p,{display:"flex",flexDirection:"column",sx:{height:"100%"},children:[e(N,{}),e(p,{sx:{display:"flex",flex:"1 1 auto"},justifyContent:"center",alignItems:"center",children:e(It,{})})]}):R(t)||r==null?n(p,{display:"flex",flexDirection:"column",sx:{height:"100%"},children:[e(N,{}),n(p,{display:"flex",flex:"1 1 auto",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[e(u,{variant:"h4",children:"Please enter your API key."}),e(Me,{})]})]}):r.moderator?n(p,{sx:{display:"flex",flexDirection:"column"},children:[e(ir,{}),e(N,{}),e(Ir,{})]}):n(p,{display:"flex",flexDirection:"column",sx:{height:"100%"},children:[e(N,{}),e(p,{sx:{display:"flex",flex:"1 1 auto"},justifyContent:"center",alignItems:"center",children:e(u,{variant:"h4",children:"Sorry, you really need to be a moderator to access these utilities :("})})]})};F.prototype.__toHuman__=F.prototype.toHuman;F.prototype.toHuman=function(t={stripZeroUnits:"all"}){let r=this.normalize(),a=[],o=typeof t.precision=="object"?F.fromObject(t.precision):F.fromMillis(0),s=r;const c=["years","months","days","hours","minutes","seconds","milliseconds"];let i,l;t.smallestUnit&&(i=c.indexOf(t.smallestUnit)),t.biggestUnit&&(l=c.indexOf(t.biggestUnit)),(!i||!(i>=0&&i<c.length))&&(i=c.indexOf("seconds")),(!l||!(l<=i&&l<c.length))&&(l=c.indexOf("years"));for(let d of c.slice(l,i+1)){if(s.as(d)>=1){a.push(d);let f={};if(f[d]=Math.floor(s.as(d)),s=s.minus(F.fromObject(f)).normalize(),s<o)break}if(t.maxUnits&&a.length>=t.maxUnits)break}if(r=r.minus(s).normalize(),r=r.shiftTo(...a),t.stripZeroUnits=="all")a=a.filter(d=>r.values[d]>0);else if(t.stripZeroUnits=="end"){let d=!0;a=a.reverse().filter(h=>d?r.values[h]==0?!1:(d=!1,!0):!0)}return a.length||a.push(c[i]),r.shiftTo(...a).__toHuman__(t)};const Tr=Ut({key:"mui",prepend:!0}),Lr=Tt({palette:{mode:"dark"}}),Mr=new Lt({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});Mt(document.getElementById("root")).render(e(Ft,{value:Tr,children:n(Wt,{theme:Lr,children:[e(Dt,{}),n(Ot,{client:Mr,children:[e($t,{store:V,children:e(Kt,{loading:null,persistor:Xt,children:e(Ur,{})})}),null]})]})}));
